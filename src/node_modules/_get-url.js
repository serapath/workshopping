const cors = 'https://cors-anywhere.herokuapp.com/'
const absoluteURLregex = /(?:^[a-z][a-z0-9+.-]*:|\/\/)/

module.exports = getURL

function getURL (url) {
  const isAbsoluteURL = absoluteURLregex.test(url)
  if (isAbsoluteURL) {
    const islocalhost = (url.includes('//localhost')
    || url.includes('//127.0.0.1') || url.includes('//0.0.0.0')
    || url.includes('//10.0.0') || url.includes('//192.168'))
    const sameorigin = new URL(url).origin === location.origin
    return (islocalhost || sameorigin) ? url : cors + url
  }
  return url  
}
